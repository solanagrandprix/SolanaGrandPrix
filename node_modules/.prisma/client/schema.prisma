datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           Int      @id @default(autoincrement())
  username     String   @unique
  passwordHash String
  isAdmin      Boolean  @default(false)
  driver       Driver?
  createdAt    DateTime @default(now())
}

model Driver {
  id     Int  @id @default(autoincrement())
  userId Int  @unique
  user   User @relation(fields: [userId], references: [id])

  driverKey   String @unique
  displayName String

  number     Int    @default(0)
  team       String @default("Privateer")
  primaryCar String @default("Mazda MX-5 Cup")
  avatar     String @default("/images/riley.png")

  irating   Int     @default(0)
  license   String  @default("Rookie")
  starts    Int     @default(0)
  freeAgent Boolean @default(true)

  xpTotal    Int    @default(0)
  xpLevel    Int    @default(1)
  xpToNext   Int    @default(500)
  skillTier  String @default("Beginner")
  bestFinish Int    @default(0)
  winRate    Float  @default(0)
  totalPurse Int    @default(0)

  preferredClasses  String?
  country           String?
  timezone          String?
  twitch            String?
  twitter           String?
  discord           String?
  driverNotes       String?
  cardCustomization String? // JSON string storing card customization settings

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
